(()=>{var r={required:"This field is required",alpha:"Please enter only letters",numeric:"Please enter only numbers",alphanumeric:"Please enter only letters or numbers",minLength:"Please enter at least %d characters",maxLength:"Please enter up to %d characters",minElements:"Please select at least %d elements",maxElements:"Please select at least %d elements",minValue:"",maxValue:"",email:"Please enter valid email address",atLeastOneUppercase:"Please enter at least one uppercase character",atLeastOneLowercase:"Please enter at least one lowercase character",atLeastOneDigit:"Please enter at least one numeric character",atLeastOneSpecial:"Please enter at least one special character",sameAs:""},w={required:(e,t)=>typeof e=="boolean"?e:Array.isArray(e)?!!e.length||r.required:!!e&&!!e.trim()||r.required,minLength:(e,t)=>e.length>=t||r.minLength.replace("%d",t),maxLength:(e,t)=>e.length<=t||r.maxLength.replace("%d",t),minElements:(e,t)=>e.length>=t||r.minLength.replace("%d",t),maxElements:(e,t)=>e.length<=t||r.maxLength.replace("%d",t),alpha:e=>/^[a-zA-Z]+$/.test(e)||r.alpha,numeric:e=>/^[0-9]+$/.test(e)||r.numeric,alphanumeric:e=>/^[a-zA-Z0-9]+$/.test(e)||r.alphanumeric,maxValue:(e,t)=>Number(e)<=t||r.maxValue.replace("%d",t),minValue:(e,t)=>Number(e)>=t||r.minValue.replace("%d",t),email:e=>/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/.test(e)||r.email,atLeastOneUppercase:e=>/[A-Z]/.test(e)||r.atLeastOneUppercase,atLeastOneLowercase:e=>/[a-z]/.test(e)||r.atLeastOneLowercase,atLeastOneSpecial:e=>/[^a-zA-Z0-9]/.test(e)||r.atLeastOneSpecial,atLeastOneDigit:e=>/[0-9]/.test(e)||r.atLeastOneDigit,sameAs:(e,t)=>e===t||r.sameAs};function z(e){let{form:t=null,name:m="input",value:u,rules:i=[],onReset:O,validation:s,validateOn:d,validateMode:o}=e,g={validateOn:["blur","immediate","form"],validateMode:["silent","eager"]},c={touched:!1,dirty:!1,valid:!1,optional:!1,validated:!1};d=g.validateOn.includes(d)?d:"blur",o=g.validateMode.includes(o)?o:"silent";let f=l=>!i.includes("required")&&(l===""||l===!1||Array.isArray(l)&&l.length===0),V=l=>{let a={},n={};return a.valid=i.reduce((L,h)=>{let[v,y]=typeof h=="string"?[h,null]:Object.entries(h)[0],P=typeof y=="function"&&y||w[v];if(!P)return L;a[v]=!1;let N=P(l,y);return N===!0?a[v]=!0:n[v]=N,L&&a[v]},!0),a.optional=f(l),{status:a,messages:n}},x=(l,a)=>{u=a!==void 0?a:u;let n=V(u);n.status.touched=s.status.touched||l==="touch",n.status.validated=s.status.validated||l==="formValidate",n.status.dirty=s.status.dirty||!!(u&&u.length),s.status=n.status,s.messages=n.messages,s.state=p()},p=()=>{let{dirty:l,touched:a,validated:n,optional:L,valid:h}=s.status;return L?"":!l&&!a&&!n||d==="form"&&!n||d==="blur"&&!a&&!n?s.state:h?o==="eager"||s.state!==""?"valid":s.state:"invalid"};return{form:t,name:m,value:u,touch:()=>x("touch"),formValidate:()=>x("formValidate"),updateValue:l=>x("valueUpdate",l),reset:()=>{s.status={...c},s.state="",s.messages={},typeof O=="function"&&O()}}}function S(e){e.store("validation",{default:{}}),e.data("form",()=>({formName:"",init(){this.formName=e.bound(this.$el,"data-form-name"),e.store("validation")[this.formName]={}}})),e.directive("validation",(t,{value:m,expression:u},{Alpine:i,effect:O,evaluate:s,evaluateLater:d,cleanup:o})=>{let g=JSON.parse(u),c=m??i.bound(t,"name")??"",f=i.$data(t).formName??"default",V=i.$data(t).validateValue,x=d(V);i.store("validation")[f][c]={status:{},messages:{},state:""};let p=z({...g,validation:i.store("validation")[f][c]}),b=()=>{let a;return x(n=>a=n),a};p.updateValue(b());let l=i.watch(b,a=>{p.updateValue(a)});i.addScopeToNode(t,{touch:p.touch,validation:i.store("validation")[f][c]}),o(l)}),e.magic("validation",(t,{Alpine:m})=>(u,i)=>m.store("validation")[u][i])}document.addEventListener("alpine:init",()=>{Alpine.plugin(S)});})();
