(()=>{function n(t){t.data("dropdownContext",(s={})=>{let a={menu:{role:"menu"}},l=["placement","offsetX","offsetY","flip","autoPlacement","inline"],o={};return["menu"].forEach(e=>{s[e]&&(o[e]=s[e],delete s[e])}),{isShow:!1,floating:null,contextData:{},autoClose:!0,placement:"bottom-start",offsetX:0,offsetY:0,flip:!1,autoPlacement:!1,init(){this.$nextTick(()=>{this.autoClose=JSON.parse(t.bound(this.$el,"data-auto-close")??this.autoClose),this.placement=t.bound(this.$el,"data-placement")??this.placement,this.offsetX=parseInt(t.bound(this.$el,"data-offset-x")??this.offsetX),this.offsetY=parseInt(t.bound(this.$el,"data-offset-y")??this.offsetY),this.flip=JSON.parse(t.bound(this.$el,"data-flip")??this.flip),this.autoPlacement=JSON.parse(t.bound(this.$el,"data-auto-placement")??this.autoPlacement);let e=l.reduce((h,i)=>({...h,[i]:this[i]}));this.floating=useFloating(null,this.$refs.menu,e)}),t.bind(this.$el,{"@keydown.escape.window.prevent"(){this.close()}})},open(){this.floating.startAutoUpdate(),this.isShow=!0},close(){this.floating.destroy(),this.isShow=!1},menu:{"x-show"(){return this.isShow},"@open-contextmenu.window"(){if(this.$event.detail.id!==this.$root.id)return;let e=this.$event.detail.$event;this.floating.updateVirtualElement(e),this.contextData=this.$event.detail.data,this.open()},"x-ref":"menu","@click.outside"(){this.close()},"@click"(){this.autoClose&&this.$el.contains(this.$event.target)&&this.close()},...o.menu,...a.menu},...s}})}document.addEventListener("alpine:init",()=>{Alpine.plugin(n)});})();
